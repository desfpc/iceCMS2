# -----------------------------
# IceCMS
# -----------------------------
server {
    listen 80;
    server_name icecms.testdomain.local;

    root /var/www/html/icecms/web;
    index index.php;

    access_log /var/log/nginx/icecms.access.log;
    error_log /var/log/nginx/icecms.error.log;

    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_pass php-fpm-icecms:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location ~* \.(html|jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|swf|eot|woff2?|ttf)$ {
            access_log off;
            expires 30d;
            try_files $uri =404;
        }
}

# -----------------------------
# Laravel
# -----------------------------
server {
    listen 80;
    server_name laravel.testdomain.local;

    root /var/www/html/laravel/public;
    index index.php;

    access_log /var/log/nginx/laravel.access.log;
    error_log /var/log/nginx/laravel.error.log;

    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_pass php-fpm-icecms:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location ~* \.(html|jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|swf|eot|woff2?|ttf)$ {
            access_log off;
            expires 30d;
            try_files $uri =404;
        }
}

# -----------------------------
# Symfony
# -----------------------------
server {
    listen 80;
    server_name symfony.testdomain.local;

    root /var/www/html/symfony/public;
    index index.php;

    access_log /var/log/nginx/symfony.access.log;
    error_log /var/log/nginx/symfony.error.log;

    location / {
        try_files $uri /index.php$is_args$args;
    }

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_pass php-fpm-icecms:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location ~* \.(html|jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|swf|eot|woff2?|ttf)$ {
            access_log off;
            expires 30d;
            try_files $uri =404;
        }
}

# -----------------------------
# Lumen
# -----------------------------
server {
    listen 80;
    server_name lumen.testdomain.local;

    root /var/www/html/lumen/public;
    index index.php;

    access_log /var/log/nginx/lumen.access.log;
    error_log /var/log/nginx/lumen.error.log;

    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_pass php-fpm-icecms:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location ~* \.(html|jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|swf|eot|woff2?|ttf)$ {
            access_log off;
            expires 30d;
            try_files $uri =404;
        }
}

# -----------------------------
# Fat-Free Framework (F3)
# -----------------------------
server {
    listen 80;
    server_name f3.testdomain.local;

    root /var/www/html/f3/public;
    index index.php;

    access_log /var/log/nginx/f3.access.log;
    error_log /var/log/nginx/f3.error.log;

    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_pass php-fpm-icecms:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }

    location ~* \.(html|jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|swf|eot|woff2?|ttf)$ {
            access_log off;
            expires 30d;
            try_files $uri =404;
        }
}